= Funcionando dos daemons =

Um daemon é responsável pela execução de uma tarefa específica de
controle do sistema.

Um daemon possui duas formas de interação com o mundo exterior:
notificações e invocação remota (RPC).

As notificações permitem que um daemon converse com outro. Um daemon A
pode ser avisado quando um daemon B altera seu estado, e
vice-versa. As notificações são enviadas àqueles que se inscrevam
previamente, assim, é necessário registrar-se para obter notificações
de alteração de estado de um outro daemon. Além disso, o daemon que
origina as notificações precisa indicar quais estados ele irá
disponibilizar aos daemons que desejam notificações.

A invocação remota (Remote Procedure Call) permite que uma entidade
externa controle o daemon. Os pontos de controle de um daemon são
previamente definidos, assim, entidades externas sabem (ou devem
saber) antecipadamente quais ações estão disponíveis para um daemon.

Assim, um daemon precisa explicitar duas informações: quais estados
(ou propriedades) ele irá disponibilizar para o sistema de
notificações; quais pontos de controle (métodos/ações) ele possuirá.

Estas definições são feitas através de um conjunto de variáveis
globais do daemon, que, seguindo uma convenção permitirá que o sistema
de controle identifique os estados e métodos do daemon.

Veja o arquivo exemplo.py paara mais detalhes da implementação.


= Os daemons por detrás das cortinas =

Os daemons interagem com duas secretárias; as informações de
inicialização destas secretárias são geradas quando da inicialização
do sistema

A primeira secretária é a RPC (Remote Procedure Call). Esta
secretária possui todos os pontos de controle de todos os daemons do
sistema (cada ponto de controle têm em seu nome um prefixo, originado
do nome do daemon ao qual ele pertence, ex. TEL_SLEW).

A segunda secretária é responsável pelo sistema de notificações do
daemon, e que contém todos os estados possíveis de serem monitorados
do daemon em questão (seu nome será formado pelo nome do daemon
acrescido em letras maiúsculas, ex. TEL).

Um script de inicialização procurará entre todos os daemons e gerará
os arquivos .conf necessários à inicialização destas secretárias, o
que implica na necessidade de reinicialização do sistema para a adição
de secretárias (esta implicação será removida quando as secretárias
permitirem adição de propriedades em tempo de execução).

